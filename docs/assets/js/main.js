"use strict";const button=document.querySelector(".js-button"),showList=document.querySelector(".js-list"),userValue=document.querySelector(".js-input"),favList=document.querySelector(".js-favlist");let shows=[],favShow=[];function queryResults(){let t=userValue.value;fetch("//api.tvmaze.com/search/shows?q="+t).then(t=>t.json()).then(t=>{shows=[];for(let e of t){const t=e.show;shows.push(t)}paintCards(shows,showList)})}function handleButton(t){t.preventDefault(),queryResults()}function loadFavoriteShows(){const t=localStorage.getItem("favShow");t&&(favShow=JSON.parse(t),paintCards(favShow,favList))}function paintCards(t,e){let o="";for(let e of t)o+=getShowHtml(e);e.innerHTML=o,addHandlerForCardsInList(t,e)}function getShowHtml(t){const e=t.name,o=t.image,s=t.id;let n="";n=o?o.medium:"https://via.placeholder.com/210x295/ffffff/666666/?text=TV";let a="card list__item";return-1!==favShow.findIndex(t=>t.id===s)&&(a+=" selectedCard"),`<li class="${a}" id="${s}">\n    <h4 class="list__title">${e}</h4>\n     <img  src="${n}">\n     </li>`}function addHandlerForCardsInList(t,e){const o=e.querySelectorAll(".card");for(let e of o)e.addEventListener("click",e=>{handleClickedShow(e,t)})}function handleClickedShow(t,e){const o=t.currentTarget,s=parseInt(o.id);updateFavoriteList(e.find(t=>t.id===s)),paintCards(favShow,favList),paintCards(shows,showList),localStorage.setItem("favShow",JSON.stringify(favShow))}function updateFavoriteList(t){const e=favShow.findIndex(e=>e.id===t.id);-1===e?favShow.push(t):favShow.splice(e,1)}loadFavoriteShows(),button.addEventListener("click",handleButton);